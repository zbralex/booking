{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ROOMS } from '../../services/rooms';\nimport { RoomDetailComponent } from \"../room-detail/room-detail.component\";\nlet ListRoomsComponent = class ListRoomsComponent {\n  constructor(roomsService, matDialog, mapSetService) {\n    this.roomsService = roomsService;\n    this.matDialog = matDialog;\n    this.mapSetService = mapSetService;\n    this.rooms = [];\n    this.coords = {};\n    this.placemarks = [];\n    this.mapSetService.onClick.subscribe(center => this.coords = center);\n  }\n\n  ngOnInit() {\n    this.getRooms();\n  }\n\n  getRooms() {\n    this.roomsService.getRooms(ROOMS).subscribe(res => {\n      this.rooms.push(res);\n    }); // подготавливаем данные для передачи в placemarks\n\n    this.rooms.forEach(item => {\n      let newItem = {\n        geometry: [item.lat, item.long],\n        properties: {\n          balloonContentHeader: `<div style=\"max-width: 250px\"><strong>${item.name}</strong><br><span>${item.address}</span></div>`,\n          balloonContentBody: `<img src=\"${item.images[0].url}\" width=\"250px\"/>`\n        },\n        options: {\n          preset: 'islands#icon',\n          iconColor: '#673ab7'\n        }\n      };\n      this.placemarks.push(newItem);\n    });\n    this.mapSetService.setPlacemarks(this.placemarks);\n  }\n\n  openDetail(id) {\n    this.matDialog.open(RoomDetailComponent, {\n      width: '330px',\n      height: '400px',\n      data: {\n        title: 'Отель id: ' + id\n      }\n    });\n  }\n\n  setCoordinates(lat, long) {\n    let coord = [lat, long];\n    this.mapSetService.setCoordinates(coord);\n  }\n\n};\nListRoomsComponent = __decorate([Component({\n  selector: 'app-list-rooms',\n  templateUrl: './list-rooms.component.html',\n  styleUrls: ['./list-rooms.component.scss']\n})], ListRoomsComponent);\nexport { ListRoomsComponent };","map":null,"metadata":{},"sourceType":"module"}