{"version":3,"file":"angular8-yandex-maps.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/angular8-yandex-maps/src/lib/services/ya-api-loader/ya-api-loader.service.ts","../../../projects/angular8-yandex-maps/src/lib/event-manager.ts","../../../projects/angular8-yandex-maps/src/lib/utils/generate-random-id.ts","../../../projects/angular8-yandex-maps/src/lib/components/ya-map/ya-map.component.ts","../../../projects/angular8-yandex-maps/src/lib/components/ya-geoobject/ya-geoobject.directive.ts","../../../projects/angular8-yandex-maps/src/lib/components/ya-placemark/ya-placemark.directive.ts","../../../projects/angular8-yandex-maps/src/lib/components/ya-clusterer/ya-clusterer.component.ts","../../../projects/angular8-yandex-maps/src/lib/components/ya-control/ya-control.directive.ts","../../../projects/angular8-yandex-maps/src/lib/components/ya-multiroute/ya-multiroute.directive.ts","../../../projects/angular8-yandex-maps/src/lib/components/ya-panorama/ya-panorama.directive.ts","../../../projects/angular8-yandex-maps/src/lib/angular-yandex-maps.module.ts","../../../projects/angular8-yandex-maps/src/lib/services/ya-geocoder/ya-geocoder.service.ts","../../../projects/angular8-yandex-maps/src/public-api.ts","../../../projects/angular8-yandex-maps/src/angular8-yandex-maps.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { DOCUMENT } from '@angular/common';\r\nimport { Inject, Injectable, InjectionToken, Optional } from '@angular/core';\r\nimport { from, fromEvent, merge, Observable, throwError } from 'rxjs';\r\nimport { map, switchMap, take } from 'rxjs/operators';\r\n\r\nexport const YA_CONFIG = new InjectionToken<YaConfig>('YA_CONFIG');\r\n\r\nexport interface YaConfig {\r\n  /**\r\n   * API key. You can get a key in the developer's dashboard.\r\n   */\r\n  apikey?: string;\r\n  /**\r\n   * Locale.\r\n   */\r\n  lang?: 'ru_RU' | 'en_US' | 'en_RU' | 'ru_UA' | 'uk_UA' | 'tr_TR';\r\n  /**\r\n   * The order for setting geographical coordinates in API functions that accept longitude-latitude input.\r\n   */\r\n  coordorder?: 'latlong' | 'longlat';\r\n  /**\r\n   * List of modules to load.\r\n   */\r\n  load?: string;\r\n  /**\r\n   * API loading mode.\r\n   */\r\n  mode?: 'release' | 'debug';\r\n  /**\r\n   * Use commercial version of the API.\r\n   */\r\n  enterprise?: boolean;\r\n  /**\r\n   * Version number of the API.\r\n   */\r\n  version?: string;\r\n}\r\n\r\n/**\r\n * The `YaApiLoader` service handles loading of Yandex.Maps API.\r\n *\r\n * @example\r\n * ```ts\r\n * import { YaApiLoaderService } from 'angular8-yandex-maps';\r\n *\r\n * export class AppComponent {\r\n *   constructor(private yaApiLoaderService: YaApiLoaderService) {\r\n *     this.yaApiLoaderService.load()\r\n *       .subscribe(v => console.log(v))\r\n *   }\r\n * }\r\n *```\r\n *\r\n * @dynamic\r\n */\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class YaApiLoaderService {\r\n  private readonly _config: YaConfig;\r\n\r\n  private readonly _defaultConfig: YaConfig = { lang: 'ru_RU' };\r\n\r\n  private _script: HTMLScriptElement;\r\n\r\n  constructor(\r\n    @Optional() @Inject(YA_CONFIG) config: YaConfig | null,\r\n    @Inject(DOCUMENT) private readonly _document: Document,\r\n  ) {\r\n    this._config = {\r\n      ...this._defaultConfig,\r\n      ...config,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Loads Yandex.Maps API\r\n   */\r\n  load(): Observable<typeof ymaps> {\r\n    if (window.ymaps) {\r\n      return from(ymaps.ready()).pipe(map(() => ymaps));\r\n    }\r\n\r\n    if (!this._script) {\r\n      const script = this._document.createElement('script');\r\n\r\n      script.type = 'text/javascript';\r\n      script.src = this._getScriptSource(this._config);\r\n      script.id = 'yandexMapsApiScript';\r\n      script.async = true;\r\n      script.defer = true;\r\n\r\n      this._script = this._document.body.appendChild(script);\r\n    }\r\n\r\n    const load = fromEvent(this._script, 'load').pipe(\r\n      switchMap(() => from(ymaps.ready()).pipe(map(() => ymaps))),\r\n    );\r\n\r\n    const error = fromEvent(this._script, 'error').pipe(switchMap((e) => throwError(e)));\r\n\r\n    return merge(load, error).pipe(take(1));\r\n  }\r\n\r\n  /**\r\n   * Returns script source by config\r\n   * @param config config with parameters that will be added in source\r\n   * @example\r\n   * // returns 'https://api-maps.yandex.ru/2.1/?apikey=658f67a2-fd77-42e9-b99e-2bd48c4ccad4&lang=en_US'\r\n   * getScriptSource({ apikey: '658f67a2-fd77-42e9-b99e-2bd48c4ccad4', lang: 'en_US' })\r\n   */\r\n  private _getScriptSource(config: YaConfig): string {\r\n    const { enterprise, version = '2.1', ...rest } = config;\r\n    const params = this._convertConfigIntoQueryParams(rest);\r\n\r\n    return `https://${enterprise ? 'enterprise.' : ''}api-maps.yandex.ru/${version}/?${params}`;\r\n  }\r\n\r\n  /**\r\n   * Converts a config into a query string parameters\r\n   * @param config object for converting\r\n   * @example\r\n   * // returns \"lang=ru_RU&apikey=XXX\"\r\n   * convertIntoQueryParams({ lang: 'ru_RU', apikey: 'XXX' })\r\n   */\r\n  private _convertConfigIntoQueryParams(config: YaConfig): string {\r\n    return Object.entries(config)\r\n      .map(([key, value]) => `${key}=${value}`)\r\n      .join('&');\r\n  }\r\n}\r\n","/**\r\n * Copied from angular/components/google-maps and edited for Yandex Maps API.\r\n * {@link https://github.com/angular/components/blob/master/src/google-maps/map-event-manager.ts}\r\n */\r\n\r\nimport { NgZone } from '@angular/core';\r\nimport { BehaviorSubject, Observable, Subscriber } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { YaEvent } from './typings/ya-event';\r\n\r\n/**\r\n * @internal\r\n */\r\ntype EventManagerTarget = {\r\n  events: ymaps.IEventManager;\r\n};\r\n\r\n/**\r\n * Manages event on a Yandex Maps object, ensuring that events are added only when necessary.\r\n * @internal\r\n */\r\nexport class EventManager {\r\n  /**\r\n   * Listeners that were added before the target was set.\r\n   */\r\n  private _pending: {\r\n    observable: Observable<any>;\r\n    observer: Subscriber<any>;\r\n  }[] = [];\r\n\r\n  private _listeners: {\r\n    name: string;\r\n    callback: (e: ymaps.Event) => void;\r\n    manager: ymaps.IEventManager;\r\n  }[] = [];\r\n\r\n  private readonly _targetStream = new BehaviorSubject<EventManagerTarget | undefined>(undefined);\r\n\r\n  constructor(private readonly _ngZone: NgZone) {}\r\n\r\n  /**\r\n   * Gets an observable that adds an event listener to the map when a consumer subscribes to it.\r\n   * @param name\r\n   */\r\n  getLazyEmitter(name: string): Observable<YaEvent> {\r\n    return this._targetStream.pipe(\r\n      switchMap((target) => {\r\n        const observable = new Observable<YaEvent>((observer) => {\r\n          // If the target hasn't been initialized yet, cache the observer so it can be added later.\r\n          if (!target) {\r\n            this._pending.push({ observable, observer });\r\n            return undefined;\r\n          }\r\n\r\n          const callback = (event: ymaps.Event) => {\r\n            const e = {\r\n              event,\r\n              target,\r\n              ymaps,\r\n            };\r\n\r\n            this._ngZone.run(() => observer.next(e));\r\n          };\r\n\r\n          const listener = target.events.add(name, callback);\r\n          this._listeners.push({ name, callback, manager: listener });\r\n\r\n          // Unsubscribe function\r\n          return () => listener.remove(name, callback as any);\r\n        });\r\n\r\n        return observable;\r\n      }),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Sets the current target that the manager should bind events to.\r\n   * @param target\r\n   */\r\n  setTarget(target: EventManagerTarget): void {\r\n    const currentTarget = this._targetStream.value;\r\n\r\n    if (target === currentTarget) {\r\n      return;\r\n    }\r\n\r\n    // Clear the listeners from the pre-existing target.\r\n    if (currentTarget) {\r\n      this._clearListeners();\r\n      this._pending = [];\r\n    }\r\n\r\n    this._targetStream.next(target);\r\n\r\n    // Add the listeners that were bound before the map was initialized.\r\n    this._pending.forEach((subscriber) => subscriber.observable.subscribe(subscriber.observer));\r\n\r\n    this._pending = [];\r\n  }\r\n\r\n  /**\r\n   * Destroys the manager and clears the event listeners.\r\n   */\r\n  destroy(): void {\r\n    this._clearListeners();\r\n    this._pending = [];\r\n    this._targetStream.complete();\r\n  }\r\n\r\n  /**\r\n   * Clears all currently-registered event listeners.\r\n   */\r\n  private _clearListeners() {\r\n    this._listeners.forEach((listener) => {\r\n      const { name, callback, manager } = listener;\r\n      manager.remove(name, callback as any);\r\n    });\r\n\r\n    this._listeners = [];\r\n  }\r\n}\r\n","/**\n * Generates a random string based on Date in hexadecimal numeral system\n * @example f175517fa4f3\n * @internal\n */\nexport const generateRandomId = (): string => {\n  return `f${Number(new Date()).toString(16)}`;\n};\n","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Inject,\r\n  Input,\r\n  NgZone,\r\n  OnChanges,\r\n  OnDestroy,\r\n  Output,\r\n  PLATFORM_ID,\r\n  SimpleChanges,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\r\nimport { EventManager } from '../../event-manager';\r\nimport { generateRandomId } from '../../utils/generate-random-id';\r\nimport { YaApiLoaderService } from '../../services/ya-api-loader/ya-api-loader.service';\r\nimport { YaReadyEvent } from '../../typings/ya-ready-event';\r\nimport { YaEvent } from '../../typings/ya-event';\r\n\r\n/**\r\n * The `ya-map` component wraps `ymaps.Map` class from the Yandex Maps API.\r\n * You can configure the map via the component's inputs.\r\n * Events can be bound using the outputs of the component.\r\n *\r\n * <example-url>https://stackblitz.com/edit/map-onload-event?embed=1</example-url>\r\n *\r\n * @example\r\n * ```html\r\n * <ya-map\r\n *   [center]=\"[55.751952, 37.600739]\"\r\n *   [state]=\"{type: 'yandex#satellite'}\"\r\n * ></ya-map>\r\n * ```\r\n */\r\n@Component({\r\n  selector: 'ya-map',\r\n  template: '<div #container></div>',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class YaMapComponent implements AfterViewInit, OnChanges, OnDestroy {\r\n  @ViewChild('container') container: ElementRef;\r\n\r\n  private readonly _sub = new Subscription();\r\n\r\n  private readonly _eventManager = new EventManager(this._ngZone);\r\n\r\n  map$ = new BehaviorSubject<ymaps.Map | undefined>(undefined);\r\n\r\n  isBrowser: boolean;\r\n\r\n  /**\r\n   * Map center geocoordinates. Default is [0, 0].\r\n   * Shorthand for [state]=\"{ center: [0, 0] }\".\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/Map.html#Map__param-state.center}\r\n   */\r\n  @Input() center: number[];\r\n\r\n  /**\r\n   * Map zoom level. Default level is 10.\r\n   * Shorthand for [state]=\"{ zoom: 10 }\".\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/Map.html#Map__param-state.zoom}\r\n   */\r\n  @Input() zoom: number;\r\n\r\n  /**\r\n   * States for the map.\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/Map.html#Mapparam-state}\r\n   */\r\n  @Input() state: ymaps.IMapState;\r\n\r\n  /**\r\n   * Options for the map.\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/Map.html#Mapparam-options}\r\n   */\r\n  @Input() options: ymaps.IMapOptions;\r\n\r\n  /**\r\n   * Map instance is created.\r\n   */\r\n  @Output() ready: EventEmitter<YaReadyEvent<ymaps.Map>> = new EventEmitter<\r\n    YaReadyEvent<ymaps.Map>\r\n  >();\r\n\r\n  /**\r\n   * The start of a new smooth map movement.\r\n   */\r\n  @Output() actionbegin: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('actionbegin');\r\n\r\n  /**\r\n   * Event that occurs when an action step was prematurely stopped.\r\n   */\r\n  @Output() actionbreak: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('actionbreak');\r\n\r\n  /**\r\n   * The end of smooth map movement.\r\n   */\r\n  @Output() actionend: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('actionend');\r\n\r\n  /**\r\n   * The start of a new step of smooth movement.\r\n   */\r\n  @Output() actiontick: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('actiontick');\r\n\r\n  /**\r\n   * The end of performing a step of smooth movement.\r\n   */\r\n  @Output() actiontickcomplete: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('actiontickcomplete');\r\n\r\n  /**\r\n   * Closing the balloon.\r\n   */\r\n  @Output() balloonclose: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('balloonclose');\r\n\r\n  /**\r\n   * Opening a balloon on a map.\r\n   */\r\n  @Output() balloonopen: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('balloonopen');\r\n\r\n  /**\r\n   * Event for a change to the map viewport.\r\n   */\r\n  @Output() boundschange: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('boundschange');\r\n\r\n  /**\r\n   * Single left-click on the object.\r\n   */\r\n  @Output() yaclick: Observable<YaEvent<ymaps.Map>> = this._eventManager.getLazyEmitter('click');\r\n\r\n  /**\r\n   * Calls the element's context menu.\r\n   */\r\n  @Output() yacontextmenu: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('contextmenu');\r\n\r\n  /**\r\n   * Double left-click on the object.\r\n   */\r\n  @Output() yadblclick: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('dblclick');\r\n\r\n  /**\r\n   * The map was destroyed.\r\n   */\r\n  @Output() destroy: Observable<YaEvent<ymaps.Map>> = this._eventManager.getLazyEmitter('destroy');\r\n\r\n  /**\r\n   * Closing the hint.\r\n   */\r\n  @Output() hintclose: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('hintclose');\r\n\r\n  /**\r\n   * Opening a hint on a map.\r\n   */\r\n  @Output() hintopen: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('hintopen');\r\n\r\n  /**\r\n   * Map margins changed.\r\n   */\r\n  @Output() marginchange: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('marginchange');\r\n\r\n  /**\r\n   * Pressing the mouse button over the object.\r\n   */\r\n  @Output() yamousedown: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('mousedown');\r\n\r\n  /**\r\n   * Pointing the cursor at the object.\r\n   */\r\n  @Output() yamouseenter: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('mouseenter');\r\n\r\n  /**\r\n   * Moving the cursor off of the object.\r\n   */\r\n  @Output() yamouseleave: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('mouseleave');\r\n\r\n  /**\r\n   * Moving the cursor over the object.\r\n   */\r\n  @Output() yamousemove: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('mousemove');\r\n\r\n  /**\r\n   * Letting go of the mouse button over an object.\r\n   */\r\n  @Output() yamouseup: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('mouseup');\r\n\r\n  /**\r\n   * End of multitouch.\r\n   */\r\n  @Output() multitouchend: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('multitouchend');\r\n\r\n  /**\r\n   * Repeating event during multitouch.\r\n   */\r\n  @Output() multitouchmove: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('multitouchmove');\r\n\r\n  /**\r\n   * Start of multitouch.\r\n   */\r\n  @Output() multitouchstart: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('multitouchstart');\r\n\r\n  /**\r\n   * Map options changed.\r\n   */\r\n  @Output() optionschange: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('optionschange');\r\n\r\n  /**\r\n   * Map size changed.\r\n   */\r\n  @Output() sizechange: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('sizechange');\r\n\r\n  /**\r\n   * The map type changed.\r\n   */\r\n  @Output() typechange: Observable<YaEvent<ymaps.Map>> =\r\n    this._eventManager.getLazyEmitter('typechange');\r\n\r\n  /**\r\n   * Mouse wheel scrolling.\r\n   */\r\n  @Output() yawheel: Observable<YaEvent<ymaps.Map>> = this._eventManager.getLazyEmitter('wheel');\r\n\r\n  constructor(\r\n    private readonly _ngZone: NgZone,\r\n    private readonly _yaApiLoaderService: YaApiLoaderService,\r\n    @Inject(PLATFORM_ID) platformId: Object,\r\n  ) {\r\n    this.isBrowser = isPlatformBrowser(platformId);\r\n  }\r\n\r\n  /**\r\n   * Handles input changes and passes them in API.\r\n   * @param changes\r\n   */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const map = this.map$.value;\r\n\r\n    if (map) {\r\n      const { center, zoom, state, options } = changes;\r\n\r\n      if (state) {\r\n        this._setState(this._combineState(), map);\r\n      }\r\n\r\n      if (center) {\r\n        map.setCenter(center.currentValue);\r\n      }\r\n\r\n      if (zoom) {\r\n        map.setZoom(zoom.currentValue);\r\n      }\r\n\r\n      if (options) {\r\n        map.options.set(options.currentValue);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    /**\r\n     * It should be a noop during server-side rendering.\r\n     */\r\n    if (this.isBrowser) {\r\n      const sub = this._yaApiLoaderService.load().subscribe(() => {\r\n        const id = generateRandomId();\r\n        const map = this._createMap(id);\r\n\r\n        this.map$.next(map);\r\n        this._eventManager.setTarget(map);\r\n        this._ngZone.run(() => this.ready.emit({ ymaps, target: map }));\r\n      });\r\n\r\n      this._sub.add(sub);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._eventManager.destroy();\r\n    this._sub.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Destructs state and passes it in API.\r\n   * @param state\r\n   * @param map\r\n   */\r\n  private _setState(state: ymaps.IMapState, map: ymaps.Map): void {\r\n    const { behaviors, bounds, center, controls, margin, type, zoom } = state;\r\n\r\n    if (behaviors) {\r\n      map.behaviors.enable(behaviors);\r\n    }\r\n\r\n    if (bounds) {\r\n      map.setBounds(bounds);\r\n    }\r\n\r\n    if (center) {\r\n      map.setCenter(center);\r\n    }\r\n\r\n    if (controls) {\r\n      controls.forEach((control) => map.controls.add(control));\r\n    }\r\n\r\n    if (margin) {\r\n      map.margin.setDefaultMargin(margin);\r\n    }\r\n\r\n    if (type) {\r\n      map.setType(type);\r\n    }\r\n\r\n    if (zoom) {\r\n      map.setZoom(zoom);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates a map.\r\n   * @param id ID which will be set to the map container.\r\n   */\r\n  private _createMap(id: string): ymaps.Map {\r\n    const containerElem: HTMLElement = this.container.nativeElement;\r\n    containerElem.setAttribute('id', id);\r\n    containerElem.style.cssText = 'width: 100%; height: 100%;';\r\n\r\n    return new ymaps.Map(id, this._combineState(), this.options || {});\r\n  }\r\n\r\n  /**\r\n   * Combines the center and zoom into single object.\r\n   */\r\n  private _combineState(): ymaps.IMapState {\r\n    const state = this.state || {};\r\n\r\n    return {\r\n      ...state,\r\n      center: this.center || state.center || [0, 0],\r\n      zoom: this.zoom ?? state.zoom ?? 10,\r\n    };\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  EventEmitter,\r\n  Input,\r\n  NgZone,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges,\r\n} from '@angular/core';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { EventManager } from '../../event-manager';\r\nimport { YaMapComponent } from '../ya-map/ya-map.component';\r\nimport { YaReadyEvent } from '../../typings/ya-ready-event';\r\nimport { YaEvent } from '../../typings/ya-event';\r\n\r\n/**\r\n * The `ya-geoobject` component wraps `ymaps.GeoObject` class from the Yandex Maps API.\r\n * You can configure it via the component's inputs.\r\n * Events can be bound using the outputs of the component.\r\n *\r\n * <example-url>https://stackblitz.com/edit/geoobject-polygon?embed=1</example-url>\r\n *\r\n * @example\r\n * ```html\r\n * <ya-map [center]=\"[55.761952, 37.620739]\">\r\n *   <ya-geoobject\r\n *     [feature]=\"{ geometry: { type: 'Rectangle', coordinates: [[55.665, 37.66], [55.64,37.53]] } }\"\r\n *   ></ya-geoobject>\r\n * </ya-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'ya-geoobject',\r\n})\r\nexport class YaGeoObjectDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly _sub = new Subscription();\r\n\r\n  private readonly _eventManager = new EventManager(this._ngZone);\r\n\r\n  geoObject?: ymaps.GeoObject;\r\n\r\n  /**\r\n   * Feature for the GeoObject.\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/GeoObject.html#GeoObjectparam-feature}\r\n   */\r\n  @Input() feature: ymaps.IGeoObjectFeature;\r\n\r\n  /**\r\n   * Options for the GeoObject.\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/GeoObject.html#GeoObjectparam-options}\r\n   */\r\n  @Input() options: ymaps.IGeoObjectOptions;\r\n\r\n  /**\r\n   * GeoObject instance is added in a Map.\r\n   */\r\n  @Output() ready: EventEmitter<YaReadyEvent<ymaps.GeoObject>> = new EventEmitter<\r\n    YaReadyEvent<ymaps.GeoObject>\r\n  >();\r\n\r\n  /**\r\n   * Closing the balloon.\r\n   */\r\n  @Output() balloonclose: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('balloonclose');\r\n\r\n  /**\r\n   * Opening a balloon on a map.\r\n   */\r\n  @Output() balloonopen: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('balloonopen');\r\n\r\n  /**\r\n   * Event preceding the \"drag\" event.\r\n   */\r\n  @Output() beforedrag: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('beforedrag');\r\n\r\n  /**\r\n   * Event preceding the \"dragstart\" event.\r\n   */\r\n  @Output() beforedragstart: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('beforedragstart');\r\n\r\n  /**\r\n   * Single left-click on the object.\r\n   */\r\n  @Output() yaclick: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('click');\r\n\r\n  /**\r\n   * Calls the element's context menu.\r\n   */\r\n  @Output() yacontextmenu: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('contextmenu');\r\n\r\n  /**\r\n   * Double left-click on the object.\r\n   */\r\n  @Output() yadblclick: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('dblclick');\r\n\r\n  /**\r\n   * Dragging a geo object.\r\n   */\r\n  @Output() yadrag: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('drag');\r\n\r\n  /**\r\n   * End of geo object dragging.\r\n   */\r\n  @Output() yadragend: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('dragend');\r\n\r\n  /**\r\n   * Start of geo object dragging.\r\n   */\r\n  @Output() yadragstart: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('dragstart');\r\n\r\n  /**\r\n   * Change in the state of the editor for the geo object's geometry.\r\n   */\r\n  @Output() editorstatechange: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('editorstatechange');\r\n\r\n  /**\r\n   * Change to the geo object geometry\r\n   */\r\n  @Output() geometrychange: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('geometrychange');\r\n\r\n  /**\r\n   * Closing the hint.\r\n   */\r\n  @Output() hintclose: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('hintclose');\r\n\r\n  /**\r\n   * Opening a hint on a map.\r\n   */\r\n  @Output() hintopen: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('hintopen');\r\n\r\n  /**\r\n   * Map reference changed.\r\n   */\r\n  @Output() mapchange: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('mapchange');\r\n\r\n  /**\r\n   * Pressing the mouse button over the object.\r\n   */\r\n  @Output() yamousedown: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('mousedown');\r\n\r\n  /**\r\n   * Pointing the cursor at the object.\r\n   */\r\n  @Output() yamouseenter: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('mouseenter');\r\n\r\n  /**\r\n   * Moving the cursor off of the object.\r\n   */\r\n  @Output() yamouseleave: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('mouseleave');\r\n\r\n  /**\r\n   * Moving the cursor over the object.\r\n   */\r\n  @Output() yamousemove: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('mousemove');\r\n\r\n  /**\r\n   * Letting go of the mouse button over an object.\r\n   */\r\n  @Output() yamouseup: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('mouseup');\r\n\r\n  /**\r\n   * End of multitouch.\r\n   */\r\n  @Output() multitouchend: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('multitouchend');\r\n\r\n  /**\r\n   * Repeating event during multitouch.\r\n   */\r\n  @Output() multitouchmove: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('multitouchmove');\r\n\r\n  /**\r\n   * Start of multitouch.\r\n   */\r\n  @Output() multitouchstart: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('multitouchstart');\r\n\r\n  /**\r\n   * Change to the object options.\r\n   */\r\n  @Output() optionschange: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('optionschange');\r\n\r\n  /**\r\n   * Change to the geo object overlay.\r\n   */\r\n  @Output() overlaychange: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('overlaychange');\r\n\r\n  /**\r\n   * The parent object reference changed.\r\n   */\r\n  @Output() parentchange: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('parentchange');\r\n\r\n  /**\r\n   * Change to the geo object data.\r\n   */\r\n  @Output() propertieschange: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('propertieschange');\r\n\r\n  /**\r\n   * Mouse wheel scrolling.\r\n   */\r\n  @Output() yawheel: Observable<YaEvent<ymaps.GeoObject>> =\r\n    this._eventManager.getLazyEmitter('wheel');\r\n\r\n  constructor(private readonly _ngZone: NgZone, private readonly _yaMapComponent: YaMapComponent) {}\r\n\r\n  /**\r\n   * Handles input changes and passes them in API.\r\n   * @param changes\r\n   */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const { geoObject } = this;\r\n\r\n    if (geoObject) {\r\n      const { feature, options } = changes;\r\n\r\n      if (feature) {\r\n        this._setFeature(feature.currentValue, geoObject);\r\n      }\r\n\r\n      if (options) {\r\n        geoObject.options.set(options.currentValue);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this._yaMapComponent.isBrowser) {\r\n      const sub = this._yaMapComponent.map$.subscribe((map) => {\r\n        if (map) {\r\n          const geoObject = this._createGeoObject();\r\n          this.geoObject = geoObject;\r\n\r\n          map.geoObjects.add(geoObject);\r\n          this._eventManager.setTarget(geoObject);\r\n          this._ngZone.run(() => this.ready.emit({ ymaps, target: geoObject }));\r\n        }\r\n      });\r\n\r\n      this._sub.add(sub);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.geoObject) {\r\n      this._yaMapComponent?.map$.value?.geoObjects.remove(this.geoObject);\r\n      this._eventManager.destroy();\r\n    }\r\n\r\n    this._sub.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Destructs feature and passes it in API.\r\n   * @param feature\r\n   * @param geoObject\r\n   */\r\n  private _setFeature(feature: ymaps.IGeoObjectFeature, geoObject: ymaps.GeoObject): void {\r\n    const { geometry, properties } = feature;\r\n\r\n    if (geometry) {\r\n      console.warn(\r\n        'The geometry can not be changed after entity init. To set it, you should recreate a GeoObject with new feature.geometry',\r\n      );\r\n    }\r\n\r\n    if (properties) {\r\n      geoObject.properties.set(properties);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates GeoObject.\r\n   */\r\n  private _createGeoObject(): ymaps.GeoObject {\r\n    return new ymaps.GeoObject(this.feature, this.options);\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  EventEmitter,\r\n  Input,\r\n  NgZone,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges,\r\n} from '@angular/core';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { YaMapComponent } from '../ya-map/ya-map.component';\r\nimport { EventManager } from '../../event-manager';\r\nimport { YaReadyEvent } from '../../typings/ya-ready-event';\r\nimport { YaEvent } from '../../typings/ya-event';\r\n\r\n/**\r\n * The `ya-placemark` directive wraps `ymaps.Placemark` class from the Yandex Maps API.\r\n * You can configure it via the directive's inputs.\r\n * Events can be bound using the outputs of the directive.\r\n *\r\n * <example-url>https://stackblitz.com/edit/custom-placemark?embed=1</example-url>\r\n *\r\n * @example\r\n * ```html\r\n * <ya-map [center]=\"[55.751952, 37.600739]\">\r\n *   <ya-placemark [geometry]=\"[55.751952, 37.600739]\"></ya-placemark>\r\n * </ya-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'ya-placemark',\r\n})\r\nexport class YaPlacemarkDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly _sub = new Subscription();\r\n\r\n  private readonly _eventManager = new EventManager(this._ngZone);\r\n\r\n  placemark?: ymaps.Placemark;\r\n\r\n  /**\r\n   * Coordinates of the placemark, or a hash describing the geometry, or a reference to the point geometry object.\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/Placemark.html#Placemark__param-geometry}\r\n   */\r\n  @Input() geometry: number[] | object | ymaps.IPointGeometry;\r\n\r\n  /**\r\n   * Properties for the placemark.\r\n   * {@link https://yandex.com/maps/jsapi/doc/2.1/ref/reference/Placemark-docpage/#Placemarkparam-properties}\r\n   */\r\n  @Input() properties: ymaps.IPlacemarkProperties | ymaps.IDataManager;\r\n\r\n  /**\r\n   * Options for the placemark.\r\n   * {@link https://yandex.com/maps/jsapi/doc/2.1/ref/reference/Placemark-docpage/#Placemarkparam-options}\r\n   */\r\n  @Input() options: ymaps.IPlacemarkOptions;\r\n\r\n  /**\r\n   * Placemark instance is added in a Map.\r\n   */\r\n  @Output() ready: EventEmitter<YaReadyEvent<ymaps.Placemark>> = new EventEmitter<\r\n    YaReadyEvent<ymaps.Placemark>\r\n  >();\r\n\r\n  /**\r\n   * Closing the balloon.\r\n   */\r\n  @Output() balloonclose: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('balloonclose');\r\n\r\n  /**\r\n   * Opening a balloon on a map.\r\n   */\r\n  @Output() balloonopen: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('balloonopen');\r\n\r\n  /**\r\n   * Event preceding the \"drag\" event.\r\n   */\r\n  @Output() beforedrag: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('beforedrag');\r\n\r\n  /**\r\n   * Event preceding the \"dragstart\" event.\r\n   */\r\n  @Output() beforedragstart: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('beforedragstart');\r\n\r\n  /**\r\n   * Single left-click on the object.\r\n   */\r\n  @Output() yaclick: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('click');\r\n\r\n  /**\r\n   * Calls the element's context menu.\r\n   */\r\n  @Output() yacontextmenu: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('contextmenu');\r\n\r\n  /**\r\n   * Double left-click on the object.\r\n   */\r\n  @Output() yadblclick: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('dblclick');\r\n\r\n  /**\r\n   * Dragging a geo object.\r\n   */\r\n  @Output() yadrag: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('drag');\r\n\r\n  /**\r\n   * End of geo object dragging.\r\n   */\r\n  @Output() yadragend: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('dragend');\r\n\r\n  /**\r\n   * Start of geo object dragging.\r\n   */\r\n  @Output() yadragstart: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('dragstart');\r\n\r\n  /**\r\n   * Change in the state of the editor for the geo object's geometry.\r\n   */\r\n  @Output() editorstatechange: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('editorstatechange');\r\n\r\n  /**\r\n   * Change to the geo object geometry\r\n   */\r\n  @Output() geometrychange: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('geometrychange');\r\n\r\n  /**\r\n   * Closing the hint.\r\n   */\r\n  @Output() hintclose: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('hintclose');\r\n\r\n  /**\r\n   * Opening a hint on a map.\r\n   */\r\n  @Output() hintopen: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('hintopen');\r\n\r\n  /**\r\n   * Map reference changed.\r\n   */\r\n  @Output() mapchange: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('mapchange');\r\n\r\n  /**\r\n   * Pressing the mouse button over the object.\r\n   */\r\n  @Output() yamousedown: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('mousedown');\r\n\r\n  /**\r\n   * Pointing the cursor at the object.\r\n   */\r\n  @Output() yamouseenter: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('mouseenter');\r\n\r\n  /**\r\n   * Moving the cursor off of the object.\r\n   */\r\n  @Output() yamouseleave: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('mouseleave');\r\n\r\n  /**\r\n   * Moving the cursor over the object.\r\n   */\r\n  @Output() yamousemove: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('mousemove');\r\n\r\n  /**\r\n   * Letting go of the mouse button over an object.\r\n   */\r\n  @Output() yamouseup: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('mouseup');\r\n\r\n  /**\r\n   * End of multitouch.\r\n   */\r\n  @Output() multitouchend: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('multitouchend');\r\n\r\n  /**\r\n   * Repeating event during multitouch.\r\n   */\r\n  @Output() multitouchmove: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('multitouchmove');\r\n\r\n  /**\r\n   * Start of multitouch.\r\n   */\r\n  @Output() multitouchstart: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('multitouchstart');\r\n\r\n  /**\r\n   * Change to the object options.\r\n   */\r\n  @Output() optionschange: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('optionschange');\r\n\r\n  /**\r\n   * Change to the geo object overlay.\r\n   */\r\n  @Output() overlaychange: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('overlaychange');\r\n\r\n  /**\r\n   * The parent object reference changed.\r\n   */\r\n  @Output() parentchange: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('parentchange');\r\n\r\n  /**\r\n   * Change to the geo object data.\r\n   */\r\n  @Output() propertieschange: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('propertieschange');\r\n\r\n  /**\r\n   * Mouse wheel scrolling.\r\n   */\r\n  @Output() yawheel: Observable<YaEvent<ymaps.Placemark>> =\r\n    this._eventManager.getLazyEmitter('wheel');\r\n\r\n  constructor(private readonly _ngZone: NgZone, private readonly _yaMapComponent: YaMapComponent) {}\r\n\r\n  /**\r\n   * Handles input changes and passes them in API.\r\n   * @param changes\r\n   */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const { placemark } = this;\r\n\r\n    if (placemark) {\r\n      const { geometry, properties, options } = changes;\r\n\r\n      if (geometry) {\r\n        placemark.geometry?.setCoordinates(geometry.currentValue);\r\n      }\r\n\r\n      if (properties) {\r\n        placemark.properties.set(properties.currentValue);\r\n      }\r\n\r\n      if (options) {\r\n        placemark.options.set(options.currentValue);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this._yaMapComponent.isBrowser) {\r\n      const sub = this._yaMapComponent.map$.subscribe((map) => {\r\n        if (map) {\r\n          const placemark = this._createPlacemark();\r\n          this.placemark = placemark;\r\n\r\n          map.geoObjects.add(placemark);\r\n          this._eventManager.setTarget(placemark);\r\n          this._ngZone.run(() => this.ready.emit({ ymaps, target: placemark }));\r\n        }\r\n      });\r\n\r\n      this._sub.add(sub);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.placemark) {\r\n      this._yaMapComponent?.map$.value?.geoObjects.remove(this.placemark);\r\n      this._eventManager.destroy();\r\n    }\r\n\r\n    this._sub.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Creates a placemark.\r\n   */\r\n  private _createPlacemark(): ymaps.Placemark {\r\n    return new ymaps.Placemark(this.geometry, this.properties, this.options);\r\n  }\r\n}\r\n","import {\r\n  AfterContentInit,\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  ContentChildren,\r\n  EventEmitter,\r\n  Input,\r\n  NgZone,\r\n  OnChanges,\r\n  OnDestroy,\r\n  Output,\r\n  QueryList,\r\n  SimpleChanges,\r\n} from '@angular/core';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { YaGeoObjectDirective } from '../ya-geoobject/ya-geoobject.directive';\r\nimport { YaMapComponent } from '../ya-map/ya-map.component';\r\nimport { YaPlacemarkDirective } from '../ya-placemark/ya-placemark.directive';\r\nimport { EventManager } from '../../event-manager';\r\nimport { YaReadyEvent } from '../../typings/ya-ready-event';\r\nimport { YaEvent } from '../../typings/ya-event';\r\n\r\n/**\r\n * The `ya-clusterer` component wraps `ymaps.Clusterer` class from the Yandex Maps API.\r\n * You can configure it via the component's inputs.\r\n * Events can be bound using the outputs of the component.\r\n *\r\n * <example-url>https://stackblitz.com/edit/placemark-clusterer?embed=1</example-url>\r\n *\r\n * @example\r\n * ```html\r\n * <ya-map [center]=\"[55.761952, 37.620739]\">\r\n *   <ya-clusterer [options]=\"{ minClusterSize: 5 }\">\r\n *     <ya-placemark [geometry]=\"[55.74, 37.5]\"></ya-placemark>\r\n *     <ya-placemark [geometry]=\"[55.64, 37.46]\"></ya-placemark>\r\n *     <ya-placemark [geometry]=\"[55.75, 37.38]\"></ya-placemark>\r\n *\r\n *     <ya-geoobject\r\n *       [feature]=\"{ geometry: { type: 'Point', coordinates: [55.81, 37.4] } }\"\r\n *      ></ya-geoobject>\r\n *\r\n *     <ya-geoobject\r\n *       [feature]=\"{ geometry: { type: 'Point', coordinates: [55.7, 37.39] } }\"\r\n *      ></ya-geoobject>\r\n *   </ya-clusterer>\r\n * </ya-map>\r\n * ```\r\n */\r\n@Component({\r\n  selector: 'ya-clusterer',\r\n  template: '<ng-content></ng-content>',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class YaClustererComponent implements AfterContentInit, OnChanges, OnDestroy {\r\n  @ContentChildren(YaPlacemarkDirective)\r\n  private readonly _placemarks: QueryList<YaPlacemarkDirective>;\r\n\r\n  @ContentChildren(YaGeoObjectDirective)\r\n  private readonly _geoObjects: QueryList<YaGeoObjectDirective>;\r\n\r\n  private readonly _sub = new Subscription();\r\n\r\n  private readonly _eventManager = new EventManager(this._ngZone);\r\n\r\n  private _clusterer?: ymaps.Clusterer;\r\n\r\n  /**\r\n   * Options for the clusterer.\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/Clusterer.html#Clusterer__param-options}\r\n   */\r\n  @Input() options: ymaps.IClustererOptions;\r\n\r\n  /**\r\n   * Clusterer instance is added in a Map.\r\n   */\r\n  @Output() ready: EventEmitter<YaReadyEvent<ymaps.Clusterer>> = new EventEmitter<\r\n    YaReadyEvent<ymaps.Clusterer>\r\n  >();\r\n\r\n  /**\r\n   * Closing the hint.\r\n   */\r\n  @Output() hintclose: Observable<YaEvent<ymaps.Clusterer>> =\r\n    this._eventManager.getLazyEmitter('hintclose');\r\n\r\n  /**\r\n   * Opening a hint on a map.\r\n   */\r\n  @Output() hintopen: Observable<YaEvent<ymaps.Clusterer>> =\r\n    this._eventManager.getLazyEmitter('hintopen');\r\n\r\n  /**\r\n   * Map reference changed.\r\n   */\r\n  @Output() mapchange: Observable<YaEvent<ymaps.Clusterer>> =\r\n    this._eventManager.getLazyEmitter('mapchange');\r\n\r\n  /**\r\n   * Change to the object options.\r\n   */\r\n  @Output() optionschange: Observable<YaEvent<ymaps.Clusterer>> =\r\n    this._eventManager.getLazyEmitter('optionschange');\r\n\r\n  /**\r\n   * The parent object reference changed.\r\n   */\r\n  @Output() parentchange: Observable<YaEvent<ymaps.Clusterer>> =\r\n    this._eventManager.getLazyEmitter('parentchange');\r\n\r\n  constructor(private readonly _ngZone: NgZone, private readonly _yaMapComponent: YaMapComponent) {}\r\n\r\n  /**\r\n   * Handles input changes and passes them in API.\r\n   * @param changes\r\n   */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const clusterer = this._clusterer;\r\n\r\n    if (clusterer) {\r\n      const { options } = changes;\r\n\r\n      if (options) {\r\n        clusterer.options.set(options.currentValue);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngAfterContentInit(): void {\r\n    if (this._yaMapComponent.isBrowser) {\r\n      const sub = this._yaMapComponent.map$.subscribe((map) => {\r\n        if (map) {\r\n          const clusterer = this._createClusterer();\r\n          this._clusterer = clusterer;\r\n\r\n          map.geoObjects.add(clusterer);\r\n          this._eventManager.setTarget(clusterer);\r\n          this._watchForContentChanges(clusterer);\r\n          this._ngZone.run(() => this.ready.emit({ ymaps, target: clusterer }));\r\n        }\r\n      });\r\n\r\n      this._sub.add(sub);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._eventManager.destroy();\r\n    this._sub.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Creates Clusterer.\r\n   */\r\n  private _createClusterer(): ymaps.Clusterer {\r\n    return new ymaps.Clusterer(this.options);\r\n  }\r\n\r\n  private _watchForContentChanges(clusterer: ymaps.Clusterer): void {\r\n    /**\r\n     * Adds new Placemarks to the clusterer on changes.\r\n     */\r\n    const currentPlacemarks = new Set<ymaps.Placemark>();\r\n\r\n    this._getInternalPlacemarks(this._placemarks.toArray()).forEach((placemark) => {\r\n      currentPlacemarks.add(placemark);\r\n      clusterer.add(placemark);\r\n    });\r\n\r\n    const placemarksSub = this._placemarks.changes.subscribe(\r\n      (placemarkDirectives: YaPlacemarkDirective[]) => {\r\n        const newPlacemarks = new Set<ymaps.Placemark>(\r\n          this._getInternalPlacemarks(placemarkDirectives),\r\n        );\r\n\r\n        const difference = this._getDifference<ymaps.Placemark>(newPlacemarks, currentPlacemarks);\r\n\r\n        clusterer.add(difference.toAdd);\r\n        clusterer.remove(difference.toRemove);\r\n      },\r\n    );\r\n\r\n    this._sub.add(placemarksSub);\r\n\r\n    /**\r\n     * Adds new GeoObjects to the clusterer on changes.\r\n     */\r\n    const currentGeoObjects = new Set<ymaps.GeoObject>();\r\n\r\n    this._getInternalGeoObjects(this._geoObjects.toArray()).forEach((geoObject) => {\r\n      currentGeoObjects.add(geoObject);\r\n      clusterer.add(geoObject);\r\n    });\r\n\r\n    const geoObjectsSub = this._geoObjects.changes.subscribe(\r\n      (geoObjectDirectives: YaGeoObjectDirective[]) => {\r\n        const newGeoObjects = new Set<ymaps.GeoObject>(\r\n          this._getInternalGeoObjects(geoObjectDirectives),\r\n        );\r\n\r\n        const difference = this._getDifference<ymaps.GeoObject>(newGeoObjects, currentGeoObjects);\r\n\r\n        clusterer.add(difference.toAdd);\r\n        clusterer.remove(difference.toRemove);\r\n      },\r\n    );\r\n\r\n    this._sub.add(geoObjectsSub);\r\n  }\r\n\r\n  /**\r\n   * Determines what should be added/removed in current set to equal new set\r\n   *\r\n   * @param newSet\r\n   * @param currentSet\r\n   */\r\n  private _getDifference<T>(newSet: Set<T>, currentSet: Set<T>) {\r\n    const toAdd: T[] = [];\r\n    const toRemove: T[] = [];\r\n\r\n    newSet.forEach((component) => {\r\n      if (!currentSet.has(component)) {\r\n        toAdd.push(component);\r\n        currentSet.add(component);\r\n      }\r\n    });\r\n\r\n    currentSet.forEach((component) => {\r\n      if (!newSet.has(component)) {\r\n        toRemove.push(component);\r\n        currentSet.delete(component);\r\n      }\r\n    });\r\n\r\n    return {\r\n      toAdd,\r\n      toRemove,\r\n    };\r\n  }\r\n\r\n  private _getInternalPlacemarks(placemarks: YaPlacemarkDirective[]): ymaps.Placemark[] {\r\n    return placemarks\r\n      .filter((component) => !!component.placemark)\r\n      .map((component) => component.placemark!);\r\n  }\r\n\r\n  private _getInternalGeoObjects(geoObjects: YaGeoObjectDirective[]): ymaps.GeoObject[] {\r\n    return geoObjects\r\n      .filter((component) => !!component.geoObject)\r\n      .map((component) => component.geoObject!);\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  EventEmitter,\r\n  Input,\r\n  NgZone,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { YaMapComponent } from '../ya-map/ya-map.component';\r\nimport { YaReadyEvent } from '../../typings/ya-ready-event';\r\n\r\nexport type YaControlType =\r\n  | 'Button'\r\n  | 'FullscreenControl'\r\n  | 'GeolocationControl'\r\n  | 'ListBox'\r\n  | 'ListBoxItem'\r\n  | 'RouteButton'\r\n  | 'RouteEditor'\r\n  | 'RoutePanel'\r\n  | 'RulerControl'\r\n  | 'SearchControl'\r\n  | 'TrafficControl'\r\n  | 'TypeSelector'\r\n  | 'ZoomControl';\r\n\r\n/**\r\n * The `ya-control` component wraps `ymaps.control[YaControlType]` classes from the Yandex Maps API.\r\n * You can configure `ymaps.control[YaControlType]` via the component's inputs.\r\n * API Events can be bound only manually. You can use `ready` event to get an instance.\r\n *\r\n * <example-url>https://stackblitz.com/edit/searchcontrol?embed=1</example-url>\r\n *\r\n * @example\r\n * ```html\r\n * <ya-map [center]=\"[55.761952, 37.620739]\">\r\n *   <ya-control\r\n *     type=\"RoutePanel\"\r\n *     [parameters]=\"{ options: { float: 'right' } }\"\r\n *   ></ya-control>\r\n * </ya-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'ya-control',\r\n})\r\nexport class YaControlDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly _sub = new Subscription();\r\n\r\n  private _control?: any;\r\n\r\n  /**\r\n   * Control type.\r\n   */\r\n  @Input() type: YaControlType;\r\n\r\n  /**\r\n   * Parameters for the Control.\r\n   */\r\n  @Input() parameters: any;\r\n\r\n  /**\r\n   * Control instance is added in a Map.\r\n   */\r\n  @Output() ready: EventEmitter<YaReadyEvent<any>> = new EventEmitter<YaReadyEvent<any>>();\r\n\r\n  constructor(private readonly _ngZone: NgZone, private readonly _yaMapComponent: YaMapComponent) {}\r\n\r\n  ngOnChanges(): void {\r\n    if (this._control) {\r\n      console.warn(\r\n        'Control does not support dynamic configuration. You can config it manually using ymaps or recreate the component with new configuration',\r\n      );\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this._yaMapComponent.isBrowser) {\r\n      const sub = this._yaMapComponent.map$.subscribe((map) => {\r\n        if (map) {\r\n          const control = new ymaps.control[this.type](this.parameters);\r\n          this._control = control;\r\n\r\n          /**\r\n           * RoutePanel ignores state in parameters. API bug\r\n           */\r\n          if (\r\n            control instanceof ymaps.control.RoutePanel &&\r\n            this.parameters &&\r\n            this.parameters.state\r\n          ) {\r\n            control.routePanel.state.set({ ...this.parameters.state });\r\n          }\r\n\r\n          map.controls.add(control);\r\n          this._ngZone.run(() => this.ready.emit({ ymaps, target: control }));\r\n        }\r\n      });\r\n\r\n      this._sub.add(sub);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this._control) {\r\n      this._yaMapComponent?.map$.value?.controls.remove(this._control);\r\n    }\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  EventEmitter,\r\n  Input,\r\n  NgZone,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges,\r\n} from '@angular/core';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { EventManager } from '../../event-manager';\r\nimport { YaMapComponent } from '../ya-map/ya-map.component';\r\nimport { YaReadyEvent } from '../../typings/ya-ready-event';\r\nimport { YaEvent } from '../../typings/ya-event';\r\n\r\n/**\r\n * @internal\r\n */\r\ntype Optional<T, K extends keyof T> = Pick<Partial<T>, K> & Omit<T, K>;\r\n\r\n/**\r\n * The `ya-multiroute` component wraps `ymaps.multiRouter.MultiRoute` class from the Yandex Maps API.\r\n * You can configure it via the component's inputs.\r\n * Events can be bound using the outputs of the component.\r\n *\r\n * <example-url>https://stackblitz.com/edit/multiroute-pedestrian?embed=1</example-url>\r\n *\r\n * @example\r\n * ```html\r\n * <ya-map [center]=\"[55.761952, 37.620739]\">\r\n *   <ya-multiroute\r\n *     [referencePoints]=\"[[55.751952, 37.600739], 'Красные ворота, Москва']\"\r\n *     [model]=\"{ params: { routingMode: 'pedestrian' } }\"\r\n *   ></ya-multiroute>\r\n * </ya-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'ya-multiroute',\r\n})\r\nexport class YaMultirouteDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly _sub = new Subscription();\r\n\r\n  private readonly _eventManager = new EventManager(this._ngZone);\r\n\r\n  private _multiroute?: ymaps.multiRouter.MultiRoute;\r\n\r\n  /**\r\n   * Reference points for the multiroute.\r\n   * Shorthand for [model]=\"{ referencePoints: [0, 0] }\".\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/IMultiRouteReferencePoint.html}\r\n   */\r\n  @Input() referencePoints: ymaps.IMultiRouteReferencePoint[];\r\n\r\n  /**\r\n   * Model description object of a multiroute.\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/IMultiRouteModelJson.html}\r\n   */\r\n  @Input() model:\r\n    | ymaps.multiRouter.MultiRouteModel\r\n    | Optional<ymaps.IMultiRouteModelJson, 'referencePoints'>;\r\n\r\n  /**\r\n   * Options for the multiroute.\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/multiRouter.MultiRoute.html#multiRouter.MultiRoute__param-options}\r\n   */\r\n  @Input() options: ymaps.multiRouter.IMultiRouteOptions;\r\n\r\n  /**\r\n   * Multiroute instance is added in a Map.\r\n   */\r\n  @Output() ready: EventEmitter<YaReadyEvent<ymaps.multiRouter.MultiRoute>> = new EventEmitter<\r\n    YaReadyEvent<ymaps.multiRouter.MultiRoute>\r\n  >();\r\n\r\n  /**\r\n   * Change to the active route.\r\n   */\r\n  @Output() activeroutechange: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('activeroutechange');\r\n\r\n  /**\r\n   * Closing the balloon.\r\n   */\r\n  @Output() balloonclose: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('balloonclose');\r\n\r\n  /**\r\n   * Opening a balloon on a map.\r\n   */\r\n  @Output() balloonopen: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('balloonopen');\r\n\r\n  /**\r\n   * The event occurs at the time of setting the map center and its zoom level for optimal display of the multi-route.\r\n   */\r\n  @Output() boundsautoapply: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('boundsautoapply');\r\n\r\n  /**\r\n   * Changing coordinates of the geographical area covering the multi-route.\r\n   */\r\n  @Output() boundschange: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('boundschange');\r\n\r\n  /**\r\n   * Single left-click on the object.\r\n   */\r\n  @Output() yaclick: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('click');\r\n\r\n  /**\r\n   * Calls the element's context menu.\r\n   */\r\n  @Output() yacontextmenu: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('contextmenu');\r\n\r\n  /**\r\n   * Double left-click on the object.\r\n   */\r\n  @Output() yadblclick: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('dblclick');\r\n\r\n  /**\r\n   * Change to the geo object geometry.\r\n   */\r\n  @Output() geometrychange: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('geometrychange');\r\n\r\n  /**\r\n   * Map reference changed.\r\n   */\r\n  @Output() mapchange: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('mapchange');\r\n\r\n  /**\r\n   * Pressing the mouse button over the object.\r\n   */\r\n  @Output() yamousedown: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('mousedown');\r\n\r\n  /**\r\n   * Pointing the cursor at the object.\r\n   */\r\n  @Output() yamouseenter: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('mouseenter');\r\n\r\n  /**\r\n   * Moving the cursor off of the object.\r\n   */\r\n  @Output() yamouseleave: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('mouseleave');\r\n\r\n  /**\r\n   * Moving the cursor over the object.\r\n   */\r\n  @Output() yamousemove: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('mousemove');\r\n\r\n  /**\r\n   * Letting go of the mouse button over an object.\r\n   */\r\n  @Output() yamouseup: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('mouseup');\r\n\r\n  /**\r\n   * End of multitouch.\r\n   */\r\n  @Output() multitouchend: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('multitouchend');\r\n\r\n  /**\r\n   * Repeating event during multitouch.\r\n   */\r\n  @Output() multitouchmove: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('multitouchmove');\r\n\r\n  /**\r\n   * Start of multitouch.\r\n   */\r\n  @Output() multitouchstart: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('multitouchstart');\r\n\r\n  /**\r\n   * Change to the object options.\r\n   */\r\n  @Output() optionschange: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('optionschange');\r\n\r\n  /**\r\n   * Change to the geo object overlay.\r\n   */\r\n  @Output() overlaychange: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('overlaychange');\r\n\r\n  /**\r\n   * The parent object reference changed.\r\n   */\r\n  @Output() parentchange: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('parentchange');\r\n\r\n  /**\r\n   * Changing pixel coordinates of the area covering the multi-route.\r\n   */\r\n  @Output() pixelboundschange: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('pixelboundschange');\r\n\r\n  /**\r\n   * Change to the geo object data.\r\n   */\r\n  @Output() propertieschange: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('propertieschange');\r\n\r\n  /**\r\n   * Updating the multi-route.\r\n   */\r\n  @Output() update: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('update');\r\n\r\n  /**\r\n   * Mouse wheel scrolling.\r\n   */\r\n  @Output() yawheel: Observable<YaEvent<ymaps.multiRouter.MultiRoute>> =\r\n    this._eventManager.getLazyEmitter('wheel');\r\n\r\n  constructor(private readonly _ngZone: NgZone, private readonly _yaMapComponent: YaMapComponent) {}\r\n\r\n  /**\r\n   * Handles input changes and passes them in API.\r\n   * @param changes\r\n   */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const multiroute = this._multiroute;\r\n\r\n    if (multiroute) {\r\n      const { referencePoints, model, options } = changes;\r\n\r\n      if (model) {\r\n        this._setModel(model.currentValue, multiroute);\r\n      }\r\n\r\n      if (referencePoints) {\r\n        multiroute.model.setReferencePoints(referencePoints.currentValue);\r\n      }\r\n\r\n      if (options) {\r\n        multiroute.options.set(options.currentValue);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this._yaMapComponent.isBrowser) {\r\n      const sub = this._yaMapComponent.map$.subscribe((map) => {\r\n        if (map) {\r\n          const multiroute = this._createMultiroute();\r\n          this._multiroute = multiroute;\r\n\r\n          map.geoObjects.add(multiroute);\r\n          this._eventManager.setTarget(multiroute);\r\n          this._ngZone.run(() => this.ready.emit({ ymaps, target: multiroute }));\r\n        }\r\n      });\r\n\r\n      this._sub.add(sub);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this._multiroute) {\r\n      this._yaMapComponent?.map$.value?.geoObjects.remove(this._multiroute);\r\n      this._eventManager.destroy();\r\n    }\r\n\r\n    this._sub.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Destructs state and passes them in API.\r\n   * @param model\r\n   * @param multiroute\r\n   */\r\n  private _setModel(\r\n    model: ymaps.IMultiRouteModelJson,\r\n    multiroute: ymaps.multiRouter.MultiRoute,\r\n  ): void {\r\n    const { referencePoints, params } = model;\r\n\r\n    if (referencePoints) {\r\n      multiroute.model.setReferencePoints(referencePoints);\r\n    }\r\n\r\n    if (params) {\r\n      multiroute.model.setParams(params);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates Multiroute.\r\n   */\r\n  private _createMultiroute(): ymaps.multiRouter.MultiRoute {\r\n    return new ymaps.multiRouter.MultiRoute(this._combineModel(), this.options);\r\n  }\r\n\r\n  /**\r\n   * Combines the model and reference points into single object\r\n   */\r\n  private _combineModel(): ymaps.IMultiRouteModelJson {\r\n    const model = (this.model || {}) as ymaps.IMultiRouteModelJson;\r\n\r\n    return {\r\n      ...model,\r\n      referencePoints: this.referencePoints || model.referencePoints,\r\n    };\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  EventEmitter,\r\n  Input,\r\n  NgZone,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges,\r\n} from '@angular/core';\r\nimport { from, Observable, Subscription } from 'rxjs';\r\nimport { filter, map, switchMap } from 'rxjs/operators';\r\nimport { EventManager } from '../../event-manager';\r\nimport { YaMapComponent } from '../ya-map/ya-map.component';\r\nimport { YaReadyEvent } from '../../typings/ya-ready-event';\r\nimport { YaEvent } from '../../typings/ya-event';\r\n\r\n/**\r\n * The `ya-panorama` component wraps `ymaps.panorama.Player` class from the Yandex Maps API.\r\n * You can configure it via the component's inputs.\r\n * Events can be bound using the outputs of the component.\r\n *\r\n * <example-url>https://stackblitz.com/edit/panorama?embed=1</example-url>\r\n *\r\n * @example\r\n * ```html\r\n * <ya-map>\r\n *   <ya-panorama [point]=\"[59.938557, 30.316198]\" layer=\"yandex#airPanorama\"></ya-panorama>\r\n * </ya-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'ya-panorama',\r\n})\r\nexport class YaPanoramaDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly _sub = new Subscription();\r\n\r\n  private readonly _eventManager = new EventManager(this._ngZone);\r\n\r\n  private _player?: ymaps.panorama.Player;\r\n\r\n  /**\r\n   * The point for searching for nearby panoramas.\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/panorama.locate.html#panorama.locate__param-point}\r\n   */\r\n  @Input() point: number[];\r\n\r\n  /**\r\n   * The layer to search for panoramas.\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/panorama.locate.html#panorama.locate__param-options.layer}\r\n   */\r\n  @Input() layer: ymaps.panorama.Layer;\r\n\r\n  /**\r\n   * Options for the player.\r\n   * {@link https://yandex.com/dev/maps/jsapi/doc/2.1/ref/reference/panorama.Player.html#panorama.Player__param-options}\r\n   */\r\n  @Input() options: ymaps.panorama.IPlayerOptions;\r\n\r\n  /**\r\n   * Panorama instance is created.\r\n   */\r\n  @Output() ready: EventEmitter<YaReadyEvent<ymaps.panorama.Player>> = new EventEmitter<\r\n    YaReadyEvent<ymaps.panorama.Player>\r\n  >();\r\n\r\n  /**\r\n   * The player was closed by the user or destroyed using the panorama.Player.destroy method.\r\n   */\r\n  @Output() destroy: Observable<YaEvent<ymaps.panorama.Player>> =\r\n    this._eventManager.getLazyEmitter('destroy');\r\n\r\n  /**\r\n   * The view direction changed.\r\n   */\r\n  @Output() directionchange: Observable<YaEvent<ymaps.panorama.Player>> =\r\n    this._eventManager.getLazyEmitter('directionchange');\r\n\r\n  /**\r\n   * An error occurred during operation of the player. The user will be shown the appropriate screen.\r\n   */\r\n  @Output() yaerror: Observable<YaEvent<ymaps.panorama.Player>> =\r\n    this._eventManager.getLazyEmitter('error');\r\n\r\n  /**\r\n   * The panorama player switched to full-screen mode.\r\n   */\r\n  @Output() fullscreenenter: Observable<YaEvent<ymaps.panorama.Player>> =\r\n    this._eventManager.getLazyEmitter('fullscreenenter');\r\n\r\n  /**\r\n   * The panorama player exited full-screen mode.\r\n   */\r\n  @Output() fullscreenexit: Observable<YaEvent<ymaps.panorama.Player>> =\r\n    this._eventManager.getLazyEmitter('fullscreenexit');\r\n\r\n  /**\r\n   * The user clicked on an expanded marker.\r\n   */\r\n  @Output() markercollapse: Observable<YaEvent<ymaps.panorama.Player>> =\r\n    this._eventManager.getLazyEmitter('markercollapse');\r\n\r\n  /**\r\n   * The user clicked on a collapsed marker.\r\n   */\r\n  @Output() markerexpand: Observable<YaEvent<ymaps.panorama.Player>> =\r\n    this._eventManager.getLazyEmitter('markerexpand');\r\n\r\n  /**\r\n   * The user's cursor hovered over a marker.\r\n   */\r\n  @Output() markermouseenter: Observable<YaEvent<ymaps.panorama.Player>> =\r\n    this._eventManager.getLazyEmitter('markermouseenter');\r\n\r\n  /**\r\n   * The user's cursor left a marker.\r\n   */\r\n  @Output() markermouseleave: Observable<YaEvent<ymaps.panorama.Player>> =\r\n    this._eventManager.getLazyEmitter('markermouseleave');\r\n\r\n  /**\r\n   * The open panorama changed.\r\n   */\r\n  @Output() panoramachange: Observable<YaEvent<ymaps.panorama.Player>> =\r\n    this._eventManager.getLazyEmitter('panoramachange');\r\n\r\n  /**\r\n   * The size of the viewport has been changed.\r\n   */\r\n  @Output() spanchange: Observable<YaEvent<ymaps.panorama.Player>> =\r\n    this._eventManager.getLazyEmitter('spanchange');\r\n\r\n  constructor(private readonly _ngZone: NgZone, private readonly _yaMapComponent: YaMapComponent) {}\r\n\r\n  /**\r\n   * Handles input changes and passes them in API.\r\n   * @param changes\r\n   */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const player = this._player;\r\n\r\n    if (player) {\r\n      const { point, layer, options } = changes;\r\n\r\n      /**\r\n       * player.moveTo resets values to default if any of them isn't passed.\r\n       * That's why we use value from currentValue OR previous value from input.\r\n       * With that logic it's possible to pass only point, layer or options.\r\n       */\r\n      if (point || layer) {\r\n        const combinedPoint: number[] = point?.currentValue || this.point;\r\n        const combinedLayer: ymaps.panorama.Layer = layer?.currentValue || this.layer;\r\n\r\n        player.moveTo(combinedPoint, { layer: combinedLayer });\r\n      }\r\n\r\n      if (options) {\r\n        this._setOptions(options.currentValue, player);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this._yaMapComponent.isBrowser) {\r\n      const panorama$ = this._yaMapComponent.map$.pipe(\r\n        filter((m): m is ymaps.Map => Boolean(m)),\r\n        switchMap((m: ymaps.Map) => {\r\n          /**\r\n           * Map and panorama use the same container, so need to destroy/remove map\r\n           */\r\n          m.destroy();\r\n          return this._createPanorama();\r\n        }),\r\n      );\r\n\r\n      const sub = panorama$.subscribe((panorama) => {\r\n        const { id } = this._yaMapComponent.container.nativeElement;\r\n        const player = new ymaps.panorama.Player(id, panorama, this.options);\r\n        this._player = player;\r\n\r\n        this._eventManager.setTarget(player);\r\n        this._ngZone.run(() => this.ready.emit({ ymaps, target: player }));\r\n      });\r\n\r\n      this._sub.add(sub);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._eventManager.destroy();\r\n    this._sub.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Destructs state and passes it in API.\r\n   * @param options\r\n   * @param player\r\n   */\r\n  private _setOptions(options: ymaps.panorama.IPlayerOptions, player: ymaps.panorama.Player): void {\r\n    const {\r\n      autoFitToViewport,\r\n      controls,\r\n      direction,\r\n      hotkeysEnabled,\r\n      span,\r\n      scrollZoomBehavior,\r\n      suppressMapOpenBlock,\r\n    } = options;\r\n\r\n    if (\r\n      autoFitToViewport ||\r\n      controls ||\r\n      hotkeysEnabled ||\r\n      scrollZoomBehavior ||\r\n      suppressMapOpenBlock\r\n    ) {\r\n      console.warn(\r\n        'Only direction and span can be set after entity init. To set other options, you should recreate a Panorama with new options',\r\n      );\r\n    }\r\n\r\n    if (direction) {\r\n      player.setDirection(direction);\r\n    }\r\n\r\n    if (span) {\r\n      player.setSpan(span);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Searches for a panorama and returns first\r\n   */\r\n  private _createPanorama(): Observable<ymaps.IPanorama> {\r\n    return from(ymaps.panorama.locate(this.point, { layer: this.layer })).pipe(\r\n      map((panoramas) => panoramas[0]),\r\n    );\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\n\nimport { YA_CONFIG, YaConfig } from './services/ya-api-loader/ya-api-loader.service';\n\nimport { YaClustererComponent } from './components/ya-clusterer/ya-clusterer.component';\nimport { YaControlDirective } from './components/ya-control/ya-control.directive';\nimport { YaGeoObjectDirective } from './components/ya-geoobject/ya-geoobject.directive';\nimport { YaMapComponent } from './components/ya-map/ya-map.component';\nimport { YaMultirouteDirective } from './components/ya-multiroute/ya-multiroute.directive';\nimport { YaPanoramaDirective } from './components/ya-panorama/ya-panorama.directive';\nimport { YaPlacemarkDirective } from './components/ya-placemark/ya-placemark.directive';\n\n@NgModule({\n  declarations: [\n    YaClustererComponent,\n    YaControlDirective,\n    YaGeoObjectDirective,\n    YaMapComponent,\n    YaMultirouteDirective,\n    YaPanoramaDirective,\n    YaPlacemarkDirective,\n  ],\n  imports: [CommonModule],\n  exports: [\n    YaClustererComponent,\n    YaControlDirective,\n    YaGeoObjectDirective,\n    YaMapComponent,\n    YaMultirouteDirective,\n    YaPanoramaDirective,\n    YaPlacemarkDirective,\n  ],\n})\nexport class AngularYandexMapsModule {\n  /**\n   * Please use this method when you register the module at the root level\n   * @param config\n   */\n  static forRoot(config: YaConfig): ModuleWithProviders<AngularYandexMapsModule> {\n    return {\n      ngModule: AngularYandexMapsModule,\n      providers: [{ provide: YA_CONFIG, useValue: config }],\n    };\n  }\n}\n","import { Injectable, NgZone } from '@angular/core';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { from, Observable } from 'rxjs';\r\nimport { YaApiLoaderService } from '../ya-api-loader/ya-api-loader.service';\r\n\r\n/**\r\n * The `YaGeocoder` service wraps `ymaps.geocode` static function from the Yandex Maps API.\r\n *\r\n * @example\r\n * ```ts\r\n * import { YaGeocoderService } from 'angular8-yandex-maps';\r\n *\r\n * export class AppComponent {\r\n *   constructor(private yaGeocoderService: YaGeocoderService) {\r\n *     this.yaGeocoderService.geocode('Moscow')\r\n *       .subscribe(v => console.log(v))\r\n *   }\r\n * }\r\n * ```\r\n */\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class YaGeocoderService {\r\n  constructor(\r\n    private readonly _ngZone: NgZone,\r\n    private readonly _yaApiLoaderService: YaApiLoaderService,\r\n  ) {}\r\n\r\n  /**\r\n   * Processes geocoding requests\r\n   * @param request\r\n   * @param options\r\n   */\r\n  geocode(request: string | number[], options?: ymaps.IGeocodeOptions): Observable<object> {\r\n    return this._yaApiLoaderService.load().pipe(\r\n      switchMap(() => from(ymaps.geocode(request, options))),\r\n      switchMap(\r\n        (result) =>\r\n          new Observable<object>((observer) => {\r\n            this._ngZone.run(() => {\r\n              observer.next(result);\r\n              observer.complete();\r\n            });\r\n          }),\r\n      ),\r\n    );\r\n  }\r\n}\r\n","/// <reference path=\"./lib/typings/yandex-maps/index.ts\" />\r\n\r\n/*\r\n * Public API Surface of angular8-yandex-maps\r\n */\r\n\r\n// Module\r\nexport * from './lib/angular-yandex-maps.module';\r\n\r\n// Services\r\nexport * from './lib/services/ya-api-loader/ya-api-loader.service';\r\nexport * from './lib/services/ya-geocoder/ya-geocoder.service';\r\n\r\n// Interfaces\r\nexport * from './lib/typings/ya-event';\r\nexport * from './lib/typings/ya-ready-event';\r\n\r\n// Components\r\nexport * from './lib/components/ya-clusterer/ya-clusterer.component';\r\nexport * from './lib/components/ya-control/ya-control.directive';\r\nexport * from './lib/components/ya-geoobject/ya-geoobject.directive';\r\nexport * from './lib/components/ya-map/ya-map.component';\r\nexport * from './lib/components/ya-multiroute/ya-multiroute.directive';\r\nexport * from './lib/components/ya-panorama/ya-panorama.directive';\r\nexport * from './lib/components/ya-placemark/ya-placemark.directive';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["InjectionToken","from","map","fromEvent","switchMap","throwError","merge","take","Injectable","Optional","Inject","DOCUMENT","BehaviorSubject","Observable","Subscription","EventEmitter","isPlatformBrowser","Component","ChangeDetectionStrategy","NgZone","PLATFORM_ID","ViewChild","Input","Output","Directive","ContentChildren","filter","NgModule","CommonModule"],"mappings":"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"}